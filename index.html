<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <title>Maps Web Services Requests Builder</title>

    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>

    <link rel="stylesheet" href="css/geo-ws.css">
    <link rel="stylesheet" href="bower_components/chosen/chosen.min.css">
    <link rel="stylesheet" href="bower_components/jquery-ui/themes/smoothness/jquery-ui.min.css" />
    <link rel="stylesheet" href="bower_components/highlight/src/styles/googlecode.css">
    <link rel="stylesheet" href="bower_components/highlight/src/styles/github.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/combo?pure/0.5.0/base-min.css&pure/0.5.0/grids-responsive-min.css&pure/0.5.0/forms-min.css">

    <link rel="import" href="bower_components/paper-styles/paper-styles.html">
    <link rel="import" href="bower_components/paper-header-panel/paper-header-panel.html">
    <link rel="import" href="bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="bower_components/paper-fab/paper-fab.html">
    <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">
    <link rel="import" href="bower_components/paper-card/paper-card.html">
    <link rel="import" href="bower_components/paper-button/paper-button.html">
    <link rel="import" href="bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
    <link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
    <link rel="import" href="bower_components/paper-tabs/paper-tab.html">
    <link rel="import" href="bower_components/iron-pages/iron-pages.html">
    <link rel="import" href="bower_components/google-apis/google-maps-api.html">
    <link rel="import" href="bower_components/google-map/google-map.html">
    <link rel="import" href="bower_components/google-map/google-map-marker.html">
    <link rel="import" href="bower_components/google-map/google-map-directions.html">
    <link rel="import" href="bower_components/paper-dialog/paper-dialog.html">
    <link rel="import" href="bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
    <link rel="import" href="bower_components/neon-animation/neon-animations.html">

    <style is="custom-style">
      paper-header-panel {
        float: left;
        @apply(--shadow-elevation-2dp);
        height: 100%;
      }

      .paper-header {
        height: 60px;
        font-size: 14px;
        line-height: 60px;
        padding: 0 10px;
        color: white;
        transition: height 0.2s;
      }

      .paper-header h1 {
        -webkit-margin-before: 0;
        -webkit-margin-after: 0;
        font-size: 24px;
      }

      .paper-header h1 .green {
        color: #0B8043;
      }

      .paper-header h1 .yellow {
        color: #F4B400;
      }

      .paper-header h1 .red {
        color: #DB4437;
      }

      .cover {
        margin: 60px;
      }

      .blue .paper-header {
        background-color: #4285F4;
      }
      .blue .content {
        background: linear-gradient(white, #b3e5fc);
      }

      paper-fab {
        display: block;
        position: fixed;
        bottom:24px;
        right: 36px;
      }

      paper-card {
        width: 100%;
        margin-top: -16px;
      }

      .ws-url iron-autogrow-textarea {
        width: 100%;
        border: 0 none;
      }

      paper-tabs {
        background-color: #7986CB;
        color: #fff;
        box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
      }

      google-map {
        height: 560px;
      }
    </style>
</head>

<body class="yui3-normalized fullbleed layout vertical">
    <paper-header-panel class="blue" mode="waterfall">
        <paper-toolbar class="paper-header">
            <header class="title">
                <h1>G<span class="red">o</span><span class="yellow">o</span>g<span class="green">l</span><span class="red">e</span> Maps Web Services Requests Builder</h1>
            </header>
            <paper-icon-button icon="settings" title="Settings" id="edit-config"></paper-icon-button>
        </paper-toolbar>
        <div class="content fill">
            <form id="form-ws" class="pure-form pure-form-aligned">
                <ol id="instances-container">
                </ol>
            </form>
            <paper-fab mini icon="add" title="Add new" tabindex="0" id="add-instance"></paper-fab>
        </div>
    </paper-header-panel>
    <paper-dialog id="config" entry-animation="scale-up-animation" exit-animation="fade-out-animation" modal>
      <h2>Settings</h2>
      <paper-dialog-scrollable>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button class="config-save" dialog-confirm autofocus>Save</paper-button>
      </div>
    </paper-dialog>

    <div id="validation-dialog" title="Validation" class="hidden">
        <p class="validation-content"></p>
    </div>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="bower_components/underscore/underscore-min.js"></script>
    <script src="bower_components/backbone/backbone-min.js"></script>
    <script src="bower_components/backbone.validation/dist/backbone-validation-min.js"></script>
    <script src="bower_components/backbone.localStorage/backbone.localStorage-min.js"></script>
    <script src="bower_components/chosen/chosen.jquery.min.js"></script>
    <script src="bower_components/blockUI/jquery.blockUI.js"></script>
    <script src="bower_components/highlight/build/highlight.pack.js"></script>
    <script src="bower_components/jem.js/jem.js"></script>
    
    <!-- external template -->
    <script id="instanceTemplate" type="text/template">
        <paper-card elevation="3">
            <div class="card-content">
                <div class="pure-g two-cols">
                    <div class="pure-u-1 pure-u-lg-11-24">
                        <div class="pure-g">
                        <fieldset class="ws-version-fs pure-u-23-24 pure-u-xl-11-24">
                            <legend>Select the version</legend>
                            <label for="ws-version-free-<%= id %>" class="pure-radio">
                                <input type="radio" name="ws-version-val-<%= id %>" id="ws-version-free-<%= id %>" <% print(version==='free'?'checked="checked"':''); %> value="free" />
                                Free
                            </label>
                            <label for="ws-version-work-<%= id %>" class="pure-radio">
                                <input type="radio" name="ws-version-val-<%= id %>" id="ws-version-work-<%= id %>" <% print(version==='work'?'checked="checked"':''); %> value="work" />
                                For Work
                            </label>
                        </fieldset>
                        <fieldset class="ws-output-fs pure-u-23-24 pure-u-xl-11-24">
                            <legend>Select the output format</legend>
                            <label for="output-json-<%= id %>" class="pure-radio">
                                <input type="radio" name="output-<%= id %>" id="output-json-<%= id %>" <% print(output==='json'?'checked="checked"':''); %> value="json" />
                                JSON
                            </label>
                            <label for="output-xml-<%= id %>" class="pure-radio">
                                <input type="radio" name="output-<%= id %>" id="output-xml-<%= id %>" <% print(output==='xml'?'checked="checked"':''); %> value="xml" />
                                XML
                            </label>
                        </fieldset>
                        </div>
        
                        <div class="pure-g">
                        <fieldset class="ws-construct-fs pure-u-23-24">
                            <legend>Construct</legend>
                            <select id="ws-choose-<%= id %>" name="ws-choose-<%= id %>" class="ws-choose">
                                <option value="">--Please select--</option>
                                <% services.forEach(function(model){
                                    print('<option value="'+model.get('id')+'"'+(model.get('id')==webservice?'  selected':'')+'>'+model.get('name')+'</option>');
                                });
                                %>
                            </select>
                            <div class="ws-parameters" id="ws-parameters-<%= id %>"></div>
                        </fieldset>
                        </div>
                    </div>
                    <div class="pure-u-1 pure-u-lg-1-2">
                        <div class="pure-g">
                        <fieldset class="ws-url-fs pure-u-1">
                            <legend>URL</legend>
                            <div class="ws-url">
                                <iron-autogrow-textarea id="ws-url-<%= id %>" rows="3" readonly></iron-autogrow-textarea>
                            </div>
                        </fieldset>
                        <fieldset class="ws-results-fs pure-u-1">
                            <template id="t-<%= id %>" is="dom-bind">
                            <paper-tabs selected="{{selected}}">
                                <paper-tab>Results</paper-tab>
                                <paper-tab>Map</paper-tab>
                            </paper-tabs>
                            <iron-pages selected="{{selected}}">
                                <div id="rtabs-<%= id %>-1">
                                    <div id="ws-result-<%= id %>"  class="ws-result"></div>
                                </div>
                                <div id="rtabs-<%= id %>-2">
                                    <google-map api-key="AIzaSyAe7JGPA_miJHu6DCw1JvJT6jrNElRnwSs" latitude="37.77493" longitude="-122.41942" signed-in="true" version="3" map="{{map}}">
                                    </google-map>
                                </div>
                            </iron-pages>
                            </template>
                        </fieldset>
                        </div>
                    </div>
                </div>
            </div>
            <div id="instance-action-<%= id %>" class="card-actions">
                <paper-button id="exec-instance-<%= id %>" class="exec" disabled>Execute</paper-button>
                <paper-button id="remove-instance-<%= id %>" class="delete">Remove</paper-button>
            </div>
        </paper-card>
        <span class="ui-icon ui-icon-carat-2-n-s ws-toggle"></span>
    </script>
    
    <!-- external template -->
    <script id="paramTemplate" type="text/template">
      <label for="parameter-<%= id %>"<%= model.get("required")?" class='parameter-required'":(model.get("requiredOrGroup")?" class='parameter-required-or'":"") %>>
      <%= name %><%= model.get("required") || model.get("requiredOrGroup")?"<sup>*</sup>":"" %>
      </label>
      <% 
            var triggers = {
                visibility: triggerCondVisibility, 
                required: triggerCondRequired,
                requiredOr: triggerCondRequiredOr
            };
            var listeners = {
                visibility: listenCondVisibility,
                required: listenCondRequired,
                requiredOr: listenCondRequiredOr
            };
            print(com.xomena.geo.getFormElement(id, name, model, triggers, listeners, parentInstance)); 
      %>
    </script>
    
    
    <!-- external template -->
    <script id="configTemplate" type="text/template">
        <fieldset class="app-config-fs">
            <label for="app-config-api-key">API key</label><br/>
            <input type="text" name="app-config-api-key" id="app-config-api-key" value="<%= API_KEY %>" placeholder="Please enter your API key" size="40" /><br/>
            <label for="app-config-client-id">Client ID</label><br/>
            <input type="text" name="app-config-client-id" id="app-config-client-id" value="<%= CLIENT_ID %>" placeholder="Please enter your client ID" size="40" /><br/>
            <label for="app-config-crypto-key">Crypto Key</label><br/>
            <input type="text" name="app-config-crypto-key" id="app-config-crypto-key" value="<%= CRYPTO_KEY %>" placeholder="Please enter your Crypto Key" size="40" /><br/>
            <label for="app-config-places-api-key">Places for Work API key</label><br/>
            <input type="text" name="app-config-places-api-key" id="app-config-places-api-key" value="<%= PLACES_API_KEY %>" placeholder="Please enter your Places for Work API key" size="40" /><br/>
            <label for="app-config-roads-api-key">Roads for Work API key</label><br/>
            <input type="text" name="app-config-roads-api-key" id="app-config-roads-api-key" value="<%= ROADS_API_KEY %>" placeholder="Please enter your Roads for Work API key" size="40" /><br/>
            <label for="app-config-server-url">Server URL</label><br/>
            <input type="text" name="app-config-server-url" id="app-config-server-url" value="<%= SERVER_URL %>" placeholder="Please enter URL for server-side" size="40" /><br/>
            <label for="app-config-sign-url">Sign URL</label><br/>
            <input type="text" name="app-config-sign-url" id="app-config-sign-url" value="<%= SIGN_URL %>" placeholder="Please enter URL for digital sign" size="40" />
        </fieldset>
    </script>
    
    <script src="js/geo-ws-model.js"></script>
    <script src="js/geo-ws.js"></script>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-57959665-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>
</html>
